<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>RTU System Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .blueprint-area {
            background: #f0f0f0 url('https://via.placeholder.com/1000x600/e2e8f0/64748b?text=Floor+Plan+Sample') center/cover;
            height: 600px;
            position: relative;
        }
        .lcu-rect {
            position: absolute;
            border: 2px dashed rgba(59, 130, 246, 0.5);
            background: rgba(59, 130, 246, 0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .lcu-circle {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 font-sans">

    <div id="page-user" class="min-h-screen flex flex-col">
        <header class="p-4 flex justify-between items-center bg-slate-800 border-b border-slate-700">
            <div>
                <h1 class="text-xl font-bold">RTU MONITORING <span class="text-sm font-normal text-slate-400" id="page-indicator">(1/2)</span></h1>
            </div>
            <button onclick="showLogin()" class="p-2 hover:bg-slate-700 rounded-full transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <circle cx="12" cy="12" r="3" />
                </svg>
            </button>
        </header>

        <main class="flex-1 flex flex-col justify-center items-center p-8 relative">
            <div class="blueprint-area w-full max-w-5xl rounded-xl shadow-2xl overflow-hidden" id="blueprint">
                <div class="lcu-rect" style="top: 20%; left: 15%; width: 120px; height: 80px;" onclick="repairLcu(1)">
                    <div id="lcu-1" class="lcu-circle bg-red-500 shadow-[0_0_10px_rgba(239,68,68,0.8)]">01</div>
                </div>
                <div class="lcu-rect" style="top: 50%; left: 60%; width: 100px; height: 100px;" onclick="repairLcu(2)">
                    <div id="lcu-2" class="lcu-circle bg-green-500">02</div>
                </div>
            </div>

            <button id="btn-prev" class="absolute left-10 p-4 bg-slate-800/80 rounded-full hidden">←</button>
            <button id="btn-next" class="absolute right-10 p-4 bg-slate-800/80 rounded-full" onclick="nextPage()">→</button>
        </main>
    </div>

    <div id="page-login" class="hidden min-h-screen flex items-center justify-center bg-slate-950">
        <div class="bg-slate-800 p-10 rounded-2xl border border-slate-700 w-96 text-center">
            <h2 class="text-2xl font-bold mb-6 italic text-blue-400">ADMIN ACCESS</h2>
            <div class="flex gap-3 justify-center mb-8">
                <input type="password" id="pin-input" maxlength="4" autofocus
                    class="w-full text-center text-4xl tracking-[0.5em] bg-slate-900 border-2 border-slate-600 rounded-lg p-4 focus:border-blue-500 outline-none"
                    oninput="handlePin(this)">
            </div>
            <div class="grid grid-cols-1 gap-3">
                <button onclick="hideLogin()" class="text-slate-400 hover:text-white transition">취소(Back)</button>
                <button onclick="alert('Master Mode: 1234')" class="text-xs text-slate-500 mt-4 underline">비밀번호 변경</button>
            </div>
        </div>
    </div>

    <div id="page-admin-main" class="hidden min-h-screen bg-slate-900">
        <nav class="p-6 flex gap-4 bg-slate-800 shadow-lg">
            <button id="tab-group" onclick="switchAdminTab('group')" class="px-6 py-2 bg-blue-600 rounded-lg font-bold">그룹별 정보</button>
            <button id="tab-individual" onclick="switchAdminTab('individual')" class="px-6 py-2 bg-slate-700 rounded-lg">개인별 정보</button>
            <button onclick="location.reload()" class="ml-auto text-slate-400">나가기</button>
        </nav>
        
        <div class="p-8">
            <div id="admin-list" class="max-w-4xl mx-auto space-y-4">
                <div onclick="showDetail('A그룹')" class="bg-slate-800 p-6 rounded-xl border border-slate-700 hover:border-blue-500 cursor-pointer flex justify-between items-center">
                    <div>
                        <span class="text-blue-400 font-bold block mb-1">SECTION A</span>
                        <span class="text-2xl font-mono">대기절감: 45kW / 전력량: 120kWh</span>
                    </div>
                    <div class="text-right">
                        <span class="text-slate-400 text-sm">순시전력</span>
                        <span class="block text-xl text-green-400">1.2kW</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-detail" class="hidden fixed inset-0 bg-black/90 flex items-center justify-center p-8 z-50">
        <div class="bg-slate-800 w-full max-w-4xl p-8 rounded-2xl relative">
            <button onclick="closeDetail()" class="absolute top-6 right-6 text-2xl">✕</button>
            <h3 id="detail-title" class="text-2xl font-bold mb-8 text-blue-400 italic">상세 정보</h3>
            <canvas id="detailChart" height="150"></canvas>
        </div>
    </div>

    <script>
        // --- 전역 변수 및 초기화 ---
        let currentPage = 1;
        const totalPages = 2;

        // --- 사용자 모드 로직 ---
        function repairLcu(id) {
            const lcu = document.getElementById(`lcu-${id}`);
            if (lcu.classList.contains('bg-red-500')) {
                lcu.classList.remove('bg-red-500', 'shadow-[0_0_10px_rgba(239,68,68,0.8)]');
                lcu.classList.add('bg-green-500');
                console.log(`LCU ${id} 복구 완료`);
            }
        }

        function nextPage() {
            currentPage = 2;
            updateArrows();
        }

        function updateArrows() {
            document.getElementById('page-indicator').innerText = `(${currentPage}/${totalPages})`;
            document.getElementById('btn-prev').classList.toggle('hidden', currentPage === 1);
            document.getElementById('btn-next').classList.toggle('hidden', currentPage === totalPages);
        }

        // --- 로그인 로직 ---
        function showLogin() {
            document.getElementById('page-user').classList.add('hidden');
            document.getElementById('page-login').classList.remove('hidden');
            document.getElementById('pin-input').focus();
        }

        function hideLogin() {
            document.getElementById('page-login').classList.add('hidden');
            document.getElementById('page-user').classList.remove('hidden');
        }

        function handlePin(input) {
            if (input.value === '0000') { // 예시 핀번호
                document.getElementById('page-login').classList.add('hidden');
                document.getElementById('page-admin-main').classList.remove('hidden');
            } else if (input.value.length >= 4) {
                alert('비밀번호가 틀렸습니다.');
                input.value = '';
            }
        }

        // --- 관리자 모드 로직 ---
        function switchAdminTab(type) {
            const isGroup = type === 'group';
            document.getElementById('tab-group').className = isGroup ? "px-6 py-2 bg-blue-600 rounded-lg font-bold" : "px-6 py-2 bg-slate-700 rounded-lg";
            document.getElementById('tab-individual').className = !isGroup ? "px-6 py-2 bg-blue-600 rounded-lg font-bold" : "px-6 py-2 bg-slate-700 rounded-lg";
            // 데이터 변경 시뮬레이션 가능
        }

        let myChart;
        function showDetail(name) {
            document.getElementById('modal-detail').classList.remove('hidden');
            document.getElementById('detail-title').innerText = `${name} 24시간 분석 통계`;
            
            const ctx = document.getElementById('detailChart').getContext('2d');
            if (myChart) myChart.destroy();
            
            myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 24}, (_, i) => `${i}시`),
                    datasets: [
                        { label: '절감량', data: [10, 12, 15, 8, 5, 20, 25, 30, 22, 18, 15, 12, 10, 8, 7, 6, 12, 25, 40, 45, 35, 20, 15, 10], borderColor: '#3b82f6', tension: 0.4 },
                        { label: '전력량', data: [50, 55, 60, 40, 30, 70, 85, 90, 80, 75, 70, 65, 60, 55, 50, 45, 60, 85, 100, 110, 95, 80, 70, 60], borderColor: '#10b981', tension: 0.4 }
                    ]
                },
                options: { responsive: true, plugins: { legend: { labels: { color: '#fff' } } } }
            });
        }

        function closeDetail() {
            document.getElementById('modal-detail').classList.add('hidden');
        }
    </script>
</body>
</html>
